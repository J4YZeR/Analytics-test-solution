# Analytics-test-solution
Приложение - решение тестового задания от JetBrains
### Краткое описание решения
Используемый ЯП: Java 11.
Сборщик проекта: Maven.

Дефолтный адрес сервиса `localhost` порт `8080`.

Параметры для h2 БД могут быть найдены в .properties файле приложения.

По умолчанию уведомления отправляются на адреса через `POST` запрос, используя RestTemplate.
Но создан класс, который выполняет запросы через WebClient. Реализацию способа отправки можно
поменять, заменив в классе `SendNotificationsServiceImpl` аннотацию `@Qualifier`.
Помимо минимальных требований, были также выполнены:
* Добавление альтернативного способа отправки уведомлений.
* Возможность задать отправку уведомлений с определенной периодичностью (опционально).
* Валидация переменных (опционально).
### API
Сервис имеет 2 эндпоинта:
* `/add`:
    
    Тело запроса должно содержать json, вида:
  ```json 
  {
  "templateId": "internshipRequest1",
  "template": "Jetbrains Internship in $teamName$ team.",
  "recipients": ["https://http1bin.org/post"]
  "valueTypes": ["teamName":"string"]
   }
  ```
  `valueTypes` - опциональный параметр.
Поддерживается 2 типа переменных:
  * `string` -
  Любая (кроме только цифр) комбинация цифр и букв и пустая строка.
  * `number' - строка должна состоять полностью из цифр. 
    
   Для любого другого типа валидатор выдает `false`.

* `/send`
  
    Тело запроса должно содержать json, вида:
  ```json 
  {
    "templateId": "internshipRequest",
    "variables": [{"teamName": "Analytics"}]
  }
  ```

    Возвращает код `200` и отправленное сообщение, если все удалось отправить, а валидация
переменных прошла успешно (либо валидаторов не было).
  
    Возвращает код `400`, если валидация переменной не прошла.

    Возвращает код `404`, если шаблон с таким id не найден.
    
    Возвращает код `500`, если не удалось отправить сообщения на 1 или более серверов.
  (при этом на остальные доступные сервера сообщения отправляются).

  Также, можно указать дополнительно параметр `timeInMilliseconds`. Этот параметр -
    суть n миллисекунд. Каждые n миллисекунд будет отправленно сообщения на сервера,
  связанные с шаблоном.
  
  
    

